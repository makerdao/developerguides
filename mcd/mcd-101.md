# MCD 101

A comprehensive overview of the smart contracts within the Dai Credit System.

### Sections
1. [Problem and Solution](#problem-and-solution)
2. [Dai and CDP Mechanisms](#dai-and-cdp-mechanisms)
3. [Smart Contract Modules](#smart-contract-modules)
4. [Advanced Concepts](#advanced-concepts)

## Problem and Solution
The ultimate guage of capital is denominated in the Global Currency, which is US Dollars (USD).

Is Bitcoin stable relative to the Global Currency?

<img align="middle" width="600" border="1" src="./pictures/bitcoinChart.png">



**Problem**: No, bitcoin, ethereum, and other cryptocurrencies are not stable relative to the USD.

**Solution**: Dai

### MakerDAO's Flapship Product

<img align="right" width="225" style="padding: 20px" height="200" src="./pictures/daipeg.png">

Dai Stablecoin
* 1 Dai ~= 1 USD
* Basic user
* Fully backed by Collateral





<br/>
<br/>

## Dai and CDP mechanisms

### Economics

**How does it keep its peg?**

<img align="right" width="300" height="275" style="padding: 20px" src="./pictures/supplyDemand.png">

* Demand curve can shift due to market conditions, confidence of Dai holders, etc

* Supply curve is shifted through a permissionless credit factory on Ethereum

* Any actor can vary the supply of Dai through a Collateralized Debt Position (CDP)

* The system was built so that these actors are incentivized to shift the supply curve to ensure that the price is $1


<br/>
<br/>

### CDP

<img align="right" width="300" height="275" style="padding: 20px" src="./pictures/CDP.png">

**Collateralized Debt Position (CDP)**


  * Borrow Dai through locking up cryptoassets as collateral

  * Repay Dai + fee to retrieve collateral

  * Safe, over-collateralized CDP >

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

<img align="right" width="300" height="275" style="padding: 20px" src="./pictures/house.png">

**Analogous to a Mortgage**


* Bank gives you a loan by “locking” ownership rights with them

* Repay debt + interest to “free” the bank’s ownership of the house

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

<img align="right" width="300" height="275" style="padding: 20px" src="./pictures/auction.png">

**Liquidations**

1. CDP is automatically liquidated if the collateral value (in USD) falls too low

2. Part of the collateral is auctioned off to cover the outstanding debt + penalty fee

3. Dai is then burned to decrease the supply

  CDP owner receives the leftover collateral


<br/>
<br/>
<br/>

### System Interaction Diagram

<img width="600" align="middle" src="./pictures/interactionD.png">


#### Users

| Name        |  Type | Description |
| ----------- | ----------- | --------- |
| Dai Holders | Basic - No additional knowledge to own Dai | Stability Seekers; Consumer; Businesses|
| CDP Owners  | Intermediate - Some knowledge | Risk Seekers; Speculators; Borrowers|
<br/>

#### Maintainers

| Name        |  Type | Description |
| ----------- | ----------- | --------- |
| Developers | Advanced - Extensive knowledge | Supports system upgrades accepted by Governors|
| Oracles  | Intermediate - Some knowledge | Supports data feed from real world to blockchain|
| Keepers | Advanced - Extensive knowledge | Builds/maintains systems that profit off system discrepancies and participate in DCS auctions |
<br/>


#### Governors

| Name        |  Type | Description |
| ----------- | ----------- | --------- |
| MKR Holders | Advanced - Extensive knowledge | Monitor, partake, and vote on upgrades/changes in DCS|
| Risk Teams | Advanced - Extensive knowledge | Collect/compile relevant data and develop risk models, assessed by MKR Holders|
<br/>


**Anyone with the required knowledge can freely participate in any role**

**Any one person (or service) can have multiple roles**


<br/>

### System Lines of Defense

At any point, the system must have more value in collateral than value of Dai supply. The following mechanisms help maintain system solvency:

1. **Supply and Demand** - supply and demand of CDPs (and thus Dai) is influenced by the Stability Fees and Debt Ceiling adjustments

2. **Liquidation** - any time the collateral value of a CDP gets closer to its debt, it becomes “risky-er”. The system liquidates CDPs that get too risky

3. **MKR Minting/Burning** - Incentivized to Govern prudently, MKR Holders are rewarded from MKR burning when Stability Fees are paid. However, if the DCS accrues too much bad debt, MKR is minted to cover the deficit.

4. **Emergency Shutdown** - This is a process that is used as a last resort in cases of extreme market irrationality, attacks, or coordinated upgrades. Emergency Shutdown gracefully settles the Maker Platform while ensuring that all users, both Dai holders and CDP users, receive the net value of assets they are entitled to.





<br/>
<br/>
<br/>


## Smart Contract Modules

#### Table of Contents
* [Sai vs Dai](#sai-vs-dai)
* [Quick Vocabulary](#quick-vocabulary---general)
* [Smart Contract Module Breakdown](#smart-contract-module-breakdown)

<br/>

#### Sai vs Dai

| Single Collateral Dai        |  Multi Collateral Dai |
| ----------- | ----------- |
| Single collateral type backing Dai | Multi. collateral types backing Dai |
| Less diversified | Collateral can be many assets |
| Liquidations occur at a fixed discount to the current collateral price | Liquidations are handled using Auctions|
| MKR used to pay stability fee | Dai used to pay stability fee |
| Decentralized governance through MKR voting rights| Decentralized governance through MKR voting rights|
| ----- |  More diversified and stable |

<br/>

#### Quick Vocabulary - General

**Risk Parameters** - system variables adjusted through MKR governance to control various types of risk.
Important parameters for each collateral type:
* **Stability fee** - a fee that continuously accrues on debt in a CDP (e.g. 0.5% per year)
* **Debt ceiling** - max amount of Dai minted for a given collateral type (e.g. 10 million Dai)
* **Liquidation ratio** - required amount of collateral as a proportion of a CDP’s total debt (e.g. 150%)

`ilk` - collateral type; each has their own set of risk parameters <br/>
`urn` - collateralized debt position; a CDP owner can control one urn per collateral type <br/>
`gem` - unlocked collateral; gem is collateral that is not yet locked in a CDP but still recorded in the system <br/>
`sin` - system debt unit; a debt token that is tracked during liquidation process <br/>
`dai` - stablecoin; a good debt token
<br/>

#### Quick Vocabulary - Rates

**Risk Premium Rate** - This rate is used to calculate the risk premium fee that accrues on debt in a CDP. A unique Risk Premium Rate is assigned to each collateral type.  (e.g. 2.5%/year for Collateral A, 3.5%/year for Collateral B, etc) <br/>
**Base Rate** - This rate is used to calculate the base fee that accrues on debt in a CDP. A system wide Base Rate is assigned to all collateral types. (e.g. 0.5%/year for the Dai Credit System) <br/>
**Stability Rate** = _Risk Premium Rate + Base Rate_. This rate is used to calculate the **Stability Fee**. <br/>
**Savings Rate** - This rate is used to calculate the interest that accrues on Savings Dai. A system wide Savings Rate is assigned to all Savings Dai. (e.g. 1%/year for Savings Dai)

**All rates accrue regularly on a per second basis.**


## Advanced Concepts
